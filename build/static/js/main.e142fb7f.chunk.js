(this["webpackJsonpsecret-santafier"]=this["webpackJsonpsecret-santafier"]||[]).push([[0],{22:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(14),r=n.n(a),i=(n(22),n(7)),l=n(2),d=n(0);function o(e){var t=e.children,n="h-2 w-full shadow-md bg-red-500";return Object(d.jsx)("main",{className:"flex justify-center items-center h-screen bg-green-400",children:Object(d.jsx)("div",{className:"w-full max-w-lg",children:Object(d.jsxs)("div",{className:"h-auto bg-white shadow-lg rounded-lg pt-6 text-white",children:[Object(d.jsx)("div",{className:n}),Object(d.jsx)("div",{className:"h-20 w-full bg-red-500 mt-2 mb-2 flex justify-center items-center shadow-md",children:Object(d.jsx)(i.b,{to:"/",children:Object(d.jsx)("h1",{className:"text-white font-bold font-display text-4xl",children:"SECRET SANTA-FIER"})})}),Object(d.jsx)("div",{className:n}),t]})})})}function j(){var e="h-2 w-full shadow-md bg-red-500";return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"flex justify-center items-center text-xl text-red-500 font-bold h-24",children:Object(d.jsx)("h2",{children:"Create a Group to begin"})}),Object(d.jsx)("div",{className:e}),Object(d.jsx)("div",{className:"h-20 flex flex-row-reverse justify-evenly items-center mt-2 mb-2 bg-red-500 shadow-md",children:Object(d.jsx)(i.b,{to:"/register",children:Object(d.jsx)("button",{className:"transition-all duration-500 hover:bg-white shadow-md font-bold px-2 py-3 rounded-md text-lg hover:text-red-500 border-2 border-white bg-red-500 text-white",children:"Create Group"})})}),Object(d.jsx)("div",{className:e})]})}var b=n(6),u=n.n(b),m=n(17),x=n(8),h=n(3);function f(e){var t=e.heading,n=e.body,c=Object(l.f)();return Object(d.jsx)("div",{className:"fixed flex justify-center items-center inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full",id:"modal",children:Object(d.jsx)("div",{className:" p-5 border w-96 shadow-lg bg-white",children:Object(d.jsxs)("div",{className:"mt-3 text-center",children:[Object(d.jsx)("div",{className:"h-2 w-full shadow-md bg-red-500"}),Object(d.jsx)("div",{className:"h-16 w-full bg-red-500 mt-2 mb-2 flex justify-center items-center shadow-md",children:Object(d.jsx)("h3",{class:"text-2xl font-display text-white",children:t})}),Object(d.jsx)("div",{className:"h-2 w-full shadow-md bg-red-500"}),Object(d.jsx)("div",{className:"text-gray-800 font-semibold p-3",children:Object(d.jsx)("p",{children:n})}),Object(d.jsx)("div",{class:"items-center px-4 py-3",children:Object(d.jsx)("button",{id:"ok-btn",class:"px-4 py-2 bg-green-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-300",onClick:function(e){c.push("/")},children:"Close"})})]})})})}function O(){var e=Object(c.useState)(""),t=Object(h.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(h.a)(a,2),i=r[0],l=r[1],o=Object(c.useState)(""),j=Object(h.a)(o,2),b=j[0],O=j[1],g=Object(c.useState)(""),p=Object(h.a)(g,2),v=p[0],y=p[1],N=Object(c.useState)(""),w=Object(h.a)(N,2),S=w[0],C=w[1],k=Object(c.useState)(!1),E=Object(h.a)(k,2),T=E[0],A=E[1],M=Object(c.useState)(1),F=Object(h.a)(M,2),I=F[0],D=F[1],P=Object(c.useState)(""),B=Object(h.a)(P,2),L=B[0],G=B[1],J=Object(c.useState)(!1),R=Object(h.a)(J,2),U=R[0],Y=R[1];function q(){return(q=Object(x.a)(u.a.mark((function e(t){var c,s,a,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),c=Date.parse(v),s=new Date(c).toLocaleString("default",{month:"long",year:"numeric",day:"numeric"}),a=0;a<I;a++)z.push({name:document.getElementById("Member ".concat(a," name")).value,email:document.getElementById("Member ".concat(a," email")).value});return console.log(U),r={group:{name:n,admin:b,adminEmail:i,exchangeDate:s,spendLimit:S,useAddress:U},members:z},e.next=8,fetch("/api/group-register",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(r)});case 8:if(l=e.sent,console.log(l.status),200!==l.status){e.next=13;break}return A(!0),e.abrupt("return",{success:!0});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=[];return Object(c.useEffect)((function(){for(var e=[],t=0;t<I;t++)e.push({name:"Member ".concat(t," name"),email:"Member ".concat(t," email")});G(e.map((function(e){var t=e.name,n=e.email;return Object(d.jsxs)("div",{className:"flex items-center justify-around mb-2",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)("label",{children:"Name"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{name:t,id:t,type:"text",className:"bg-gray-100 border-2 rounded-md"})})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)("label",{children:"Email"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{name:n,id:n,type:"email",className:"bg-gray-100 border-2 rounded-md"})})]})]},t)})))}),[I]),Object(d.jsxs)(d.Fragment,{children:[!0===T?Object(d.jsx)(f,{heading:"Group Added!",body:"You will get an email when all group members have confirmed."}):null,Object(d.jsxs)("form",{onSubmit:function(e){!function(e){q.apply(this,arguments)}(e)},className:"text-gray-600 font-bold mt-5",children:[Object(d.jsxs)("div",{className:"flex justify-center mb-5",children:[Object(d.jsx)("div",{className:"w-1/3",children:Object(d.jsx)("label",{children:"Name"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",value:b,onChange:function(e){return O(e.target.value)},className:"bg-gray-100 border-2 rounded-md"})})]}),Object(d.jsxs)("div",{className:"flex justify-center mb-5",children:[Object(d.jsx)("div",{className:"w-1/3",children:Object(d.jsx)("label",{children:"Group Name"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"text",value:n,onChange:function(e){return s(e.target.value)},className:"bg-gray-100 border-2 rounded-md"})})]}),Object(d.jsxs)("div",{className:"flex justify-center mb-5",children:[Object(d.jsx)("div",{className:"w-1/3",children:Object(d.jsx)("label",{children:"Email"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{value:i,onChange:function(e){return l(e.target.value)},type:"email",className:"bg-gray-100 border-2 rounded-md"})})]}),Object(d.jsxs)("div",{className:"flex justify-center mb-5",children:[Object(d.jsx)("div",{className:"w-1/3",children:Object(d.jsx)("label",{children:"Spending Limit"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{value:S,onChange:function(e){return C(e.target.value)},type:"number",className:"bg-gray-100 border-2 rounded-md"})})]}),Object(d.jsxs)("div",{className:"flex justify-center mb-5",children:[Object(d.jsx)("div",{className:"w-1/3",children:Object(d.jsx)("label",{children:"Gift Exchange Date"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{value:v,onChange:function(e){return y(e.target.value)},type:"date",className:"bg-gray-100 border-2 rounded-md"})})]}),Object(d.jsxs)("div",{className:"flex justify-center mb-5",children:[Object(d.jsx)("div",{className:"w-1/3",children:Object(d.jsx)("label",{children:"Include Mailing Address?"})}),Object(d.jsx)("div",{children:Object(d.jsx)("input",Object(m.a)({className:"w-full",onChange:function(e){return Y(!U)},type:"checkbox"},"className","h-6 w-6 bg-gray-100 border-2 rounded-md mt-3"))})]}),Object(d.jsxs)("div",{className:"flex flex-col flex-wrap justify-around p-2",children:[L,Object(d.jsx)("div",{className:"flex justify-center mt-2",children:Object(d.jsxs)("div",{className:"flex items-center w-1/5 justify-around",children:[Object(d.jsx)("button",{onClick:function(e){return D(I+1)},type:"button",className:"material-icons-outlined text-white bg-green-400 rounded-md p-1",children:"add"}),Object(d.jsx)("button",{onClick:function(e){return D(I-1)},type:"button",className:"material-icons-outlined text-white bg-red-500 rounded-md p-1",children:"remove"})]})})]}),Object(d.jsx)("div",{className:"flex justify-center p-3 ",children:Object(d.jsx)("button",{className:"btn bg-red-500 px-2 py-1 rounded-md font-display font-bold text-white text-lg",type:"submit",value:"Submit",children:"SUBMIT"})})]})]})}function g(e){var t,n=e.token,s=e.display,a=Object(c.useState)(""),r=Object(h.a)(a,2),i=r[0],l=r[1],o=Object(c.useState)(""),j=Object(h.a)(o,2),b=j[0],m=j[1],O=Object(c.useState)(""),g=Object(h.a)(O,2),p=g[0],v=g[1],y=Object(c.useState)(""),N=Object(h.a)(y,2),w=N[0],S=N[1],C=Object(c.useState)(0),k=Object(h.a)(C,2),E=k[0],T=k[1];function A(){return(A=Object(x.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/address",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,address:"".concat(i," ").concat(b,", ").concat(p," ").concat(w)})});case 3:if(200!==e.sent.status){e.next=9;break}return T(!0),e.abrupt("return");case 9:alert("An error occurred.");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t=s?"transition-all h-80 ease-in-out duration-700 bg-red-500 rounded-b-lg w-full p-5 font-bold":"transition-all h-0 opacity-0 ease-in-out duration-700 bg-red-500 rounded-b-lg w-full p-5 font-bold ",Object(d.jsxs)("div",{className:t,children:[E?Object(d.jsx)(f,{heading:"Address Added!",body:"You will get an email once all group members have confirmed."}):null,Object(d.jsxs)("form",{onSubmit:function(e){return A.apply(this,arguments)},className:"w-full flex flex-col items-center",children:[Object(d.jsxs)("div",{className:"flex flex-col",children:[Object(d.jsx)("label",{children:"Street or Box Number"}),Object(d.jsx)("input",{className:"rounded p-1 text-gray-700 font-semibold focus:outline-green",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(d.jsxs)("div",{className:"flex flex-col",children:[Object(d.jsx)("label",{children:"City"}),Object(d.jsx)("input",{className:"rounded p-1 text-gray-700 font-semibold focus:outline-green",value:b,onChange:function(e){return m(e.target.value)}})]}),Object(d.jsxs)("div",{className:"flex flex-col",children:[Object(d.jsx)("label",{children:"State"}),Object(d.jsx)("input",{className:"rounded p-1 text-gray-700 font-semibold focus:outline-green",value:p,onChange:function(e){return v(e.target.value)}})]}),Object(d.jsxs)("div",{className:"flex flex-col",children:[Object(d.jsx)("label",{children:"Postal Code"}),Object(d.jsx)("input",{className:"rounded p-1 text-gray-700 font-semibold focus:outline-green",value:w,type:"tel",onChange:function(e){return S(e.target.value)}}),Object(d.jsx)("div",{className:"w-full flex justify-end",children:Object(d.jsx)("button",{className:"transition-all duration-500 p-2 border-white border-4 mt-3 mr-1 rounded-md text-lg font-bold hover:bg-white hover:text-red-500",value:"Submit",type:"submit",children:"Submit"})})]})]})]})}function p(){var e=Object(c.useState)(!1),t=Object(h.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),r=Object(h.a)(a,2),i=r[0],o=r[1],j=Object(c.useState)(""),b=Object(h.a)(j,2),m=b[0],f=b[1],O=function(){var e=Object(l.g)().search;return Object(c.useMemo)((function(){return new URLSearchParams(e)}),[e])}().get("token");return console.log(O),Object(c.useEffect)((function(){function e(){return(e=Object(x.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:O})});case 2:200===(t=e.sent).status?t.json().then((function(e){return o(e.token)})):f("Token Invalid");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[O]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"flex flex-col items-center justify-center p-10 text-gray-700 font-bold",children:[m?Object(d.jsx)("h3",{children:m}):Object(d.jsx)("h3",{children:"Email verification successful!"}),Object(d.jsx)("button",{onClick:function(e){return s(!n)},className:"transition-all duration-500 rounded-md bg-red-500 border-2 border-white p-3 font-semibold text-white hover:bg-green-400",children:"Enter Mailing Address"})]}),Object(d.jsx)(g,{token:i,display:n})]})}var v=function(){return Object(d.jsx)(i.a,{children:Object(d.jsx)(o,{children:Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",children:Object(d.jsx)(j,{})}),Object(d.jsx)(l.a,{path:"/register",children:Object(d.jsx)(O,{})}),Object(d.jsx)(l.a,{path:"/group",children:Object(d.jsx)(p,{})})]})})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(v,{})}),document.getElementById("root")),y()}},[[33,1,2]]]);
//# sourceMappingURL=main.e142fb7f.chunk.js.map